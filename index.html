<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="icon" href="./logo.jpg.png" type="image/jpeg">
  <link rel="shortcut icon" href="./logo.jpg.png" type="image/jpeg">
  <link rel="apple-touch-icon" href="./logo.jpg.png">
  <title>I'm Sigmund Freud</title>
  <style>
    .freud-modal-backdrop{
      position:fixed; inset:0; z-index:3000; pointer-events:none;
      background:
        radial-gradient(120% 100% at 50% 30%, rgba(17,24,39,.55), rgba(2,6,23,.78));
      backdrop-filter: blur(1.6px);
      -webkit-backdrop-filter: blur(1.6px);
      opacity:0; transition: opacity .28s ease;
    }
    .freud-modal{
      position:fixed; inset:0; z-index:3001; display:flex; align-items:center; justify-content:center;
      opacity:0; transform: translateY(6px) scale(.98); transition: opacity .28s ease, transform .28s ease;
      pointer-events:none;
    }
    .freud-modal.show, .freud-modal-backdrop.show{ opacity:1; pointer-events:auto; transform:none; }
    .freud-modal .panel{
      width:min(720px, 92vw); border-radius:16px; padding:22px 22px 18px;
      border:1px solid var(--border);
      background:
        linear-gradient(180deg, rgba(255,255,255,.96), rgba(252,250,246,.96)),
        radial-gradient(120% 140% at 50% -10%, rgba(250,247,239,.85), transparent 60%),
        linear-gradient(180deg, #fbfaf7, #f4efe6 55%, #f1e9dd);
      box-shadow: 0 24px 60px rgba(2,6,23,.36), inset 0 1px 0 rgba(255,255,255,.6);
      font-family: "Times New Roman","Noto Serif SC","Songti SC",Georgia,serif;
      color:#1b2430;
      position:relative;
    }
    .freud-modal .panel::after{ /* subtle paper grain */
      content:""; position:absolute; inset:0; border-radius:inherit; pointer-events:none; mix-blend-mode:soft-light; opacity:.18;
      background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 140 140'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='2' stitchTiles='stitch'/></filter><rect width='140' height='140' filter='url(%23n)' opacity='.18'/></svg>");
      background-size:240px 240px;
    }
    .freud-modal .title{
      margin:0 0 8px; font-size:16px; letter-spacing:.6px; text-align:center; color:#374151;
    }
    .freud-modal .content{
      white-space:pre-wrap; line-height:1.8; font-size:15px; color:#111827;
    }
    .freud-modal .actions{
      display:flex; justify-content:center; gap:10px; margin-top:14px;
    }
    .freud-modal .close{
      position:absolute; top:10px; right:10px; width:28px; height:28px; border-radius:50%;
      background:rgba(0,0,0,.04); border:1px solid var(--border); color:#111;
      display:grid; place-items:center; cursor:pointer; font-size:16px; line-height:1;
      transition: background .2s ease, transform .2s ease;
    }
    .freud-modal .close:hover{ background:rgba(0,0,0,.08); transform: translateY(-1px); }
    :root{
      --bg:#fafafa; --fg:#222; --muted:#666; --accent:#204ecf;
      --card:#ffffff; --border:#e5e7eb;
    }
    html,body{background:var(--bg); color:var(--fg); margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,"Noto Sans SC","PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif; line-height:1.7;}
    header{background:var(--card); border-bottom:1px solid var(--border); position:sticky; top:0; z-index:1000; transition: transform .32s ease; will-change: transform;}
    .wrap{max-width:960px; margin:0 auto; padding:20px;}
    h1{margin:8px 0 0; font-size:28px;}
    nav{margin-top:10px; font-size:14px}
    nav a{color:var(--accent); text-decoration:none; margin-right:12px}
    nav a:hover{text-decoration:underline}
    header.is-hidden{ transform: translateY(-110%); }
    main .card{background:var(--card); border:1px solid var(--border); border-radius:10px; padding:20px; margin:18px 0}
    h2{margin:0 0 10px}
    h3{margin:18px 0 8px}
    ul{padding-left:18px}
    .meta{color:var(--muted); font-size:14px}
    .grid{display:grid; grid-template-columns:1fr; gap:14px}
    @media (min-width:820px){ .grid{grid-template-columns:1fr 1fr} }
    blockquote{border-left:4px solid var(--border); margin:8px 0; padding:8px 12px; color:#444; background:#fcfcfc}
    footer{color:var(--muted); font-size:13px; padding:24px 0; text-align:center}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace; background:#f1f5f9; border:1px solid #e2e8f0; padding:0 6px; border-radius:6px}
    .badge{display:inline-block; font-size:12px; color:#fff; background:#111827; padding:2px 8px; border-radius:999px; margin-left:8px; vertical-align:middle;}
    section {scroll-margin-top: 100px; }
    .intro-container {display: flex;align-items: flex-start;gap: 20px;}
    .intro-text {flex: 1;}
    .intro-img {width: 220px;height: auto;border-radius: 8px;object-fit: cover;}
    .portrait{ position:relative; width:220px; flex:0 0 220px; }
    .portrait .main{ width:100%; height:auto; border-radius:8px; display:block; }
    .portrait{ z-index: 1; }
    .portrait .main{ position:relative; z-index:1; }
    .fan{ z-index: 1200; }
    .fan a{ z-index: 1201; }
    .fan{
      position:absolute;
      right:0;               
      top:50%;
      transform: translateY(-50%);
      width:0; height:0;
      pointer-events:none;
    }
    .fan a{
      position:absolute; left:0; top:0;
      transform-origin: 50% 50%;     
      transform: translate(-50%, -50%) scale(.9);
      opacity:0;
      transition: transform .45s cubic-bezier(.22,.61,.36,1), opacity .28s ease;
      pointer-events:auto;
    }
    .fan img{
      display:block;
      height:auto;
      max-width: 160px;  
      max-height: 130px;  
      border-radius:12px; 
      box-shadow:0 12px 28px rgba(0,0,0,.22);
    }
    .portrait:hover .fan a{ opacity:1; }
    .portrait:hover .fan a:nth-child(1){ transform: rotate(-90deg) translate(220px) rotate(90deg)  translate(-50%, -50%) scale(1);  transition-delay:.02s; }
    .portrait:hover .fan a:nth-child(2){ transform: rotate(-45deg) translate(220px) rotate(45deg)  translate(-50%, -50%) scale(1);  transition-delay:.06s; }
    .portrait:hover .fan a:nth-child(3){ transform: rotate(0deg)   translate(220px) rotate(0deg)   translate(-50%, -50%) scale(1);  transition-delay:.10s; }
    .portrait:hover .fan a:nth-child(4){ transform: rotate(45deg)  translate(220px) rotate(-45deg) translate(-50%, -50%) scale(1); transition-delay:.14s; }
    .portrait:hover .fan a:nth-child(5){ transform: rotate(90deg)  translate(220px) rotate(-90deg) translate(-50%, -50%) scale(1); transition-delay:.18s; }
    .portrait:hover .main{ filter:brightness(.8); transition:filter .25s ease; }
    html.js #worksList{ display:none; } 
    .book-carousel{ position:relative; margin:10px 0 8px; }
    .book-carousel .track-wrap{ overflow:hidden; padding:10px 0; }
    .book-carousel .track{
      list-style:none; margin:0; padding:0;
      display:flex; align-items:center; gap:16px;
      transition: transform .45s cubic-bezier(.22,.61,.36,1); will-change: transform;
    }
    .book-carousel .slide{
      position:relative;
      flex:0 0 calc((100% - 32px)/3); 
      aspect-ratio: 3 / 4;           
      border-radius:12px; 
      overflow:hidden;
      background:var(--card);
      border:1px solid var(--border); 
      box-shadow:0 10px 20px rgba(0,0,0,.08);
      transform: translateZ(0);
      transition: transform .35s ease, filter .35s ease, opacity .35s ease;
      cursor:pointer;
    }
    .book-carousel .slide img{
      position:absolute; inset:0;
      width:100%; height:100%;
      object-fit:cover; display:block;
      border-radius:inherit;
    }
    .book-carousel .slide.is-center{ transform: scale(1.05); z-index:2; filter:none; opacity:1; }
    .book-carousel .slide.is-side{ filter: grayscale(.35) contrast(.95) blur(.3px); opacity:.6; }
    .book-carousel .nav{
      position:absolute; top:50%; transform: translateY(-50%);
      width:36px; height:36px; border-radius:50%;
      border:1px solid var(--border); background:var(--card); color:var(--fg);
      box-shadow:0 6px 16px rgba(0,0,0,.12); cursor:pointer;
    }
    .book-carousel .prev{ left:-6px; }
    .book-carousel .next{ right:-6px; }
    .book-caption{ margin-top:12px; border-top:1px dashed var(--border); padding-top:12px; }
    @media (max-width:820px){
      .book-carousel .slide{ flex:0 0 70%; }
    }
    @media (max-width: 760px){.intro-container{ flex-direction:column; }.portrait{ align-self:center; }
    }
    #more.card{ padding:0; background:transparent; border:0; }
    .cta-link{
      display:flex; align-items:center; justify-content:center; gap:12px;
      padding:16px 20px; border:1px solid var(--border); background:var(--card);
      border-radius:14px; text-decoration:none; font-weight:600; color:var(--fg);
      box-shadow:0 10px 20px rgba(0,0,0,.06);
      transition: transform .25s ease, box-shadow .25s ease, background .25s ease;
    }
    .cta-link:hover{ transform:translateY(-1px); box-shadow:0 14px 26px rgba(0,0,0,.10); }
    .cta-text{ letter-spacing:.2px; }
    .cta-link .arrow{
      width:18px; height:18px; border:2px solid currentColor; border-left:0; border-top:0;
      transform: rotate(-45deg); border-radius:2px; transition: transform .25s ease; opacity:.9;
    }
    .cta-link:hover .arrow{ transform: translateX(4px) rotate(-45deg); }
  </style>
</head>
<body>
  <div id="freudBackdrop" class="freud-modal-backdrop" aria-hidden="true"></div>
  <div id="freudModal" class="freud-modal" role="dialog" aria-modal="true" aria-labelledby="freudTitle" aria-describedby="freudContent">
    <div class="panel">
      <button id="freudClose" class="close" aria-label="关闭">×</button>
      <h3 id="freudTitle" class="title">Sigmund Freud</h3>
      <div id="freudContent" class="content">
        我是弗洛伊德。我复活了？——也许只是你无意识里弹出的一个小窗口，像口误、像梦的边角……
        别紧张，雪茄（咳）……在哪儿。
        听我嘀咕：本我在喊饿，自我在记账，超我又举红牌；移情在门口敲门，反移情悄悄跟着走。
        Wo Es war, soll Ich werden——别管德语，把它当咒语。
        你昨晚的梦：那条梯子/那匹马/那把钥匙——我没看见，可我已经想解释了（等等，别走）。
        文明让我们压抑，压抑让我们文明；你以为你在读我，其实是我在读你。
        把这个小叉叉点掉吧，看看你为什么非要点掉我；或者留下我，看看你在等谁允许你留下……
        嗯，时间到了，分析永远不够——碎碎念继续，明天同一时间？........</div>
      <div class="actions"></div>
    </div>
  </div>
  <header> 
    <div class="wrap">
      <h1>弗洛伊德（Sigmund Freud）<span class="badge">1856—1939</span></h1>
      <nav>
        <a href="#intro">简介</a>
        <a href="#timeline">生平年表</a>
        <a href="#ideas">核心理论</a>
        <a href="#works">主要著作</a>
        <a href="#practice">临床方法</a>
        <a href="#impact">影响与评价</a>
        <a href="#facts">趣味小知识</a>
        <a href="#quotes">经典语录</a>
      </nav>
    </div>
  </header>

  <main class="wrap">
    <section id="intro" class="card">
      <h2>简介</h2>
      <div class="intro-container">
        <div class="intro-text">
          <p>
            <b>西格蒙德·弗洛伊德</b>（德语：Sigmund Freud，出生名：Sigismund Schlomo Freud；1856年5月6日—1939年9月23日）是奥地利心理学家、精神分析学创始人、哲学家、性学家，他也是二十世纪最有影响力的思想家之一。
            他以临床个案为出发点，提出无意识理论、心理动力学模型与梦的解析，并发展出以自由联想—解释—移情处理—工作通过为核心的治疗技术。
            尽管他的方法论在当代科学标准下饱受质疑，但其开启的“心灵阐释学”持续影响心理治疗、文学批评、艺术、电影、社会思想与大众文化。
          </p>
          <p class="meta">
            关键词：<span class="kbd">无意识</span>、<span class="kbd">本我-自我-超我</span>、
            <span class="kbd">心理性欲发展阶段</span>、<span class="kbd">梦的工作</span>、
            <span class="kbd">移情</span>、<span class="kbd">自由联想</span>
          </p>
          <img src="./name.png" alt="Sigmund Freud Name" style="margin-top:10px; max-width:100%; height:auto; margin-left: 160px;" />
        </div>
        <div class="portrait">
          <img src="./smoke.jpg" alt="Sigmund Freud" class="intro-img main" />
          <div class ="fan">
            <a href="#"><img src="freud1.jpg" alt="Freud 1"></a>
            <a href="#"><img src="freud2.jpg" alt="Freud 2"></a>
            <a href="#"><img src="frued3.jpg" alt="Freud 3"></a>
            <a href="#"><img src="freud4.jpg" alt="Freud 4"></a>
            <a href="#"><img src="freud5.jpg" alt="Freud 5"></a>
          </div>
        </div>
      </div>
    </section>

    <section id="timeline" class="card">
      <h2>生平年表</h2>
      <div class="grid">
        <div>
          <ul>
            <li><b>1856</b>：出生于弗赖贝格；犹太家庭。</li>
            <li><b>1873–1881</b>：维也纳大学医学学习，主攻神经科学。</li>
            <li><b>1885–1886</b>：巴黎进修，受沙可催眠研究影响。</li>
            <li><b>1895</b>：与布洛伊尔发表《歇斯底里研究》：精神分析雏形。</li>
            <li><b>1900</b>：《梦的解析》提出“梦是通向无意识的皇家大道”。</li>
            <li><b>1902</b>：组织“星期三心理学学会”，精神分析学派形成。</li>
          </ul>
        </div>
        <div>
          <ul>
            <li><b>1905</b>：《性学三论》提出心理性欲发展阶段。</li>
            <li><b>1920</b>：《超越快乐原则》提出死亡本能等概念。</li>
            <li><b>1923</b>：《自我与本我》提出结构模型：本我/自我/超我。</li>
            <li><b>1930</b>：《文明及其缺憾》，讨论个人欲望与文化约束的冲突。</li>
            <li><b>1938</b>：德奥合并后流亡伦敦。</li>
            <li><b>1939</b>：逝世于伦敦，长期口腔癌治疗无效。</li>
          </ul>
        </div>
      </div>
    </section>

    <section id="ideas" class="card">
      <h2>核心理论</h2>

      <h3>1) 心灵的三结构</h3>
      <ul>
        <li><b>地形模型</b>：意识—前意识—无意识。</li>
        <li><b>结构模型</b>：<b>本我</b>（原始驱力，遵循快乐原则）、<b>自我</b>（现实调节，现实原则）、<b>超我</b>（内化的道德与理想）。</li>
      </ul>

      <h3>2) 心理性欲发展阶段</h3>
      <ul>
        <li>口欲期（0–1岁）→ 肛欲期（1–3岁）→ 性蕾期/俄狄浦斯期（3–6岁）→ 潜伏期（6–青春期）→ 生殖期（青春期以后）。</li>
        <li>提出<b>俄狄浦斯情结</b>与<b>恋父情结</b>（伊莱克特拉情结的名称由荣格流行化）。</li>
      </ul>

      <h3>3) 梦的工作机制</h3>
      <ul>
        <li>梦通过<b>凝缩</b>（多意合一）、<b>移置</b>（情感转移）、<b>象征化</b>与<b>二次加工</b>把潜在梦思转为表面梦境。</li>
      </ul>

      <h3>4) 防御机制</h3>
      <ul>
        <li>压抑、否认、投射、置换、反向形成、合理化、升华等（系统化与扩展来自其女儿安娜·弗洛伊德）。</li>
      </ul>
    </section>

    <section id="practice" class="card">
      <h2>精神分析的临床方法</h2>
      <ul>
        <li><b>自由联想</b>：患者尽量不加筛选地说出想到的任何内容。</li>
        <li><b>梦的分析</b>：从梦象中追索潜在意义与情感。</li>
        <li><b>移情/反移情</b>：患者把重要他人情感投向治疗者；治疗者需辨识自身反应。</li>
        <li><b>解释与洞见</b>：以时机恰当的解释促进自我整合。</li>
      </ul>
      <blockquote>目标不是“消除所有冲突”，而是让自我变得更为强健且更能容纳矛盾。</blockquote>
    </section>

    <section id="works" class="card">
      <h2>主要著作</h2>
      <div class="book-carousel" aria-label="弗洛伊德著作选集">
        <button class="nav prev" aria-label="上一部" type="button">‹</button>
        <div class="track-wrap">
          <ul class="track" id="bookTrack">
            <li class="slide" data-key="0"><img src="./book1.jpg" alt="梦的解析"></li>
            <li class="slide" data-key="1"><img src="./book2.jpg" alt="性学三论"></li>
            <li class="slide" data-key="2"><img src="./book3.jpg" alt="图腾与禁忌"></li>
            <li class="slide" data-key="3"><img src="./book4.jpg" alt="超越快乐原则"></li>
            <li class="slide" data-key="4"><img src="./book5.jpg" alt="自我与本我"></li>
            <li class="slide" data-key="5"><img src="./book6.jpg" alt="文明及其缺憾"></li>
          </ul>
        </div>
        <button class="nav next" aria-label="下一部" type="button">›</button>
      </div>
      <div class="book-caption" id="bookCaption"></div>
      <ul id="worksList">
        <li><b><i>梦的解析</i></b>（1900）：奠定精神分析学的基础，提出“梦是通往无意识的皇家大道”，区分显梦与潜梦，并以凝缩、移置、象征化、次级加工解释梦如何把被压抑的愿望变形呈现。</li>
        <li><b><i>性学三论</i></b>（1905）：系统提出“儿童性”与心理性欲发展阶段，去道德化讨论“性倒错/变态性”，主张力比多的多样走向与青春期的整合，对人格形成与症状来源给出早期模型。</li>
        <li><b><i>图腾与禁忌</i></b>（1913）：把精神分析扩展到人类学与宗教研究，以图腾崇拜与乱伦禁忌推演“原始父亲—弑父—认同”的文化神话框架，想象力宏大但学术争议亦最为显著。</li>
        <li><b><i>超越快乐原则</i></b>（1920）：在创伤回返与战争神经症的观察中提出“重复强迫”，引入“死亡驱力/死本能”以修正仅以快乐原则解释心理能量的不足，解释破坏性冲动与自我破坏现象。</li>
        <li><b><i>自我与本我</i></b>（1923）：确立“本我—自我—超我”的结构模型，阐明压抑的运作与超我的来源，自我作为调节与防御中枢的功能由此成形，成为后世心理动力治疗的核心框架。</li>
        <li><b><i>文明及其缺憾</i></b>（1930）：从个体本能与社会秩序的对立理解现代人的普遍焦虑与内疚，指出文明以压抑攻击/性冲动维持秩序却制造不幸福，揭示个人幸福与公共文明之间难以化解的张力。</li>
      </ul>
    </section>

    <section id="impact" class="card">
      <h2>影响与评价</h2>
      <h3>积极影响</h3>
      <ul>
        <li> 弗洛伊德最大贡献在于把精神疾患从“躯体—收容”的轨道拉回到“语言—关系”的场域，
          他以自由联想、梦的解析与移情处理奠定了谈话治疗的操作范式，让早期经历、欲望冲突与防御机制进入人格与病因学解释；
          “无意识”“防御”“移情/反移情”等概念至今仍是临床与督导的通用语言。</li>
        <li>更广阔的层面上，他为20世纪的人文艺术提供了一套强有力的阐释学：
          文学与电影借此分析人物动机与象征，艺术史、人类学与文化研究以此讨论禁忌、神话与权力结构；
          心理治疗领域也由此分化出荣格、阿德勒、客体关系、自体心理学与拉康等多支传统，
          并在现代心理动力治疗中与循证方法对话，推动以叙事、关系和意义来理解痛苦与改变。</li>
      </ul>
      <h3>主要批评</h3>
      <ul>
        <li> 弗洛伊德的许多命题难以以实验或统计方式证伪，案例多来自维也纳中产女性且样本量小，解释高度依赖分析师主观判断，
          易受暗示与确认偏差影响；早期文本的“过度性化”、父权中心与性别角色预设在当代标准下备受质疑，部分文化—人类学推演也缺乏资料学支撑。
          临床上，传统分析频次高、周期长、成本大，并非所有人群与情境适用，疗效证据在历史上也一度薄弱。</li>
        <li> 尽管如此，后续的心理动力学流派已对其进行方法学修正（操作化手册、随机对照研究、与认知神经科学对话），但这不等于为早期理论全部背书；
          更稳妥的立场是把精神分析视为一种有启发力的解释框架与技术传统，在尊重证据与文化多样性的前提下谨慎使用与持续检验。</li>
      </ul>
    </section>

    <section id="facts" class="card">
      <h2>趣味小知识</h2>
      <ul>
        <li>弗洛伊德酷爱雪茄，长期口腔癌治疗使其后期多次手术。</li>
        <li>弗洛伊德酷爱古物，书房陈列大量希腊、埃及与罗马小雕像，他自称这些“沉默的见证者”帮助他思考。</li>
        <li>分析时常有一只松狮犬Jofi在身边，被戏称为“最早的治疗犬”；它也帮助调节来访者的焦虑。</li>
      </ul>
    </section>

    <section id="quotes" class="card">
      <h2>经典语录</h2>
      <blockquote>
        <p><strong>Es war, soll Ich werden.</strong></p>
        <p>Where id was, there ego shall be.</p>
        <p>“本我所在之处，自我必将到来。” ——《新精神分析引论》（1933）</p>
      </blockquote>
      <br>
      <blockquote>
        <p><strong>Der Traum ist der (königliche) Weg zum Unbewussten.</strong></p>
        <p>Dreams are the royal road to the unconscious.</p>
        <p>“梦是通往无意识的皇家大道。” ——《梦的解析》（1900）</p>
      </blockquote>
    </section>

    <section id="more" class="card">
      <a class="cta-link" href="https://www.youtube.com/watch?v=mQaqXK7z9LM" target="_blank" rel="noopener noreferrer" aria-label="More about me on YouTube">
        <span class="cta-text">More about me.....</span>
        <span class="arrow" aria-hidden="true"></span>
      </a>
    </section>

  </main>

  <footer>
    <div class="wrap">
      © 2025 弗洛伊德的博客
    </br>aka维基百科搬运
    </br>by Iswull
    </div>
  </footer>
  <script>
  (function(){
    // ===== Opening modal (show on first load in this session) =====
    const fModal  = document.getElementById('freudModal');
    const fBack   = document.getElementById('freudBackdrop');
    const fClose  = document.getElementById('freudClose');
    let freudShown = false;

    function openFreud(){
      if(!fModal || !fBack) return;
      fBack.classList.add('show'); fModal.classList.add('show');
      document.body.style.overflow = 'hidden';
      freudShown = true;
    }
    function closeFreud(){
      if(!fModal || !fBack) return;
      fBack.classList.remove('show'); fModal.classList.remove('show');
      document.body.style.overflow = '';
      sessionStorage.setItem('freud_opening_shown','1');
    }
    if(!sessionStorage.getItem('freud_opening_shown')){ openFreud(); }

    if(fClose){ fClose.addEventListener('click', closeFreud); }
    if(fBack){ fBack.addEventListener('click', closeFreud); }
    document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && fModal && freudShown){ closeFreud(); } });
    const header = document.querySelector('header');
    if(!header) return;
    let last = window.scrollY || document.documentElement.scrollTop;
    let ticking = false;

    function run(){
      const y = window.scrollY || document.documentElement.scrollTop;
      const dy = y - last;

      if (y < 10){
        header.classList.remove('is-hidden');
        last = y;
        ticking = false;
        return;
      }

      if (Math.abs(dy) > 4){
        if (dy > 0){
          header.classList.add('is-hidden');
        } else {
          header.classList.remove('is-hidden');
        }
        last = y;
      }
      ticking = false;
    }

    window.addEventListener('scroll', function(){
      if(!ticking){
        requestAnimationFrame(run);
        ticking = true;
      }
    }, {passive:true});

    document.documentElement.classList.add('js'); 
    (function(){
      const list = document.getElementById('worksList');
      const carousel = document.querySelector('#works .book-carousel');
      if(!list || !carousel) return;

      const wrap = carousel.querySelector('.track-wrap');
      const track = document.getElementById('bookTrack');
      const slides = Array.from(track.querySelectorAll('.slide'));
      const descLis = Array.from(list.querySelectorAll('li'));
      const caption = document.getElementById('bookCaption');

      let idx = 1;            
      let offsetX = 0;       

      function applyClasses(){
        slides.forEach((s,i)=>{
          s.classList.remove('is-center','is-side');
          if(i === idx) s.classList.add('is-center');
          else if(i === (idx+1)%slides.length || i === (idx-1+slides.length)%slides.length) s.classList.add('is-side');
        });
        if (caption && descLis[idx]) caption.innerHTML = descLis[idx].innerHTML;
      }

      function centerOnCurrent(){
        const wr = wrap.getBoundingClientRect();
        const sr = slides[idx].getBoundingClientRect();
        const dx = (sr.left + sr.width/2) - (wr.left + wr.width/2);
        offsetX -= dx;
        track.style.transform = `translateX(${offsetX}px)`;
      }

      function go(delta){
        idx = (idx + delta + slides.length) % slides.length;
        applyClasses();
        centerOnCurrent();
      }

      applyClasses();
      centerOnCurrent();

      carousel.querySelector('.prev').addEventListener('click', ()=>go(-1));
      carousel.querySelector('.next').addEventListener('click', ()=>go(1));
      slides.forEach((s,i)=> s.addEventListener('click', ()=>{ if(i!==idx){ idx=i; applyClasses(); centerOnCurrent(); } }));

      carousel.setAttribute('tabindex','0');
      carousel.addEventListener('keydown', (e)=>{ if(e.key==='ArrowLeft') go(-1); else if(e.key==='ArrowRight') go(1); });

      let startX=null;
      wrap.addEventListener('touchstart', e=>{ startX = e.touches[0].clientX; }, {passive:true});
      wrap.addEventListener('touchend', e=>{
        if(startX==null) return;
        const dx = e.changedTouches[0].clientX - startX;
        if(Math.abs(dx) > 30) go(dx<0?1:-1);
        startX = null;
      }, {passive:true});

      window.addEventListener('resize', ()=>{ centerOnCurrent(); }, {passive:true});
    })();
  })();
  </script>
</body>
</html>

</html>
